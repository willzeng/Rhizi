// Generated by CoffeeScript 1.6.3
(function() {
  var __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  define([], function() {
    var AddNode;
    return AddNode = (function(_super) {
      __extends(AddNode, _super);

      function AddNode(options) {
        this.options = options;
        AddNode.__super__.constructor.call(this);
      }

      AddNode.prototype.init = function(instances) {
        var $addNode, $addProfileHelper,
          _this = this;
        this.dataController = instances['local/Neo4jDataController'];
        this.graphModel = instances['GraphModel'];
        this.selection = instances['NodeSelection'];
        this.graphView = instances['GraphView'];
        this.nodeEdit = instances['local/NodeEdit'];
        $addNode = $("<div id='add-node' class='result-element'><span>Add Something</span><br/><span id='add-person-button'>Person</span><span id='add-project-button'>Project</span><span id='add-theme-button'>Theme</span><span id='add-other-button'>Other</span></div>").appendTo($('#omniBox'));
        $addProfileHelper = $("<div class='node-profile-helper'></div>").appendTo($('#omniBox'));
        $('#add-person-button').click(function() {
          return _this.createNode({
            "name": "",
            "url": "",
            "email": "",
            "type": "person"
          });
        });
        $('#add-project-button').click(function() {
          return _this.createNode({
            "name": "",
            "url": "",
            "description": "",
            "type": "project"
          });
        });
        $('#add-theme-button').click(function() {
          return _this.createNode({
            "name": "",
            "description": "",
            "type": "theme"
          });
        });
        return $('#add-other-button').click(function() {
          return _this.createNode({
            "name": "",
            "url": "",
            "description": ""
          });
        });
      };

      AddNode.prototype.createNode = function(node) {
        var _this = this;
        return this.dataController.nodeAdd(node, function(datum) {
          datum.fixed = true;
          datum.px = ($(window).width() / 2 - _this.graphView.currentTranslation[0]) / _this.graphView.currentScale;
          datum.py = ($(window).height() / 2 - _this.graphView.currentTranslation[1]) / _this.graphView.currentScale;
          _this.graphModel.putNode(datum);
          _this.selection.toggleSelection(datum);
          return _this.nodeEdit.editNode(datum, $($('.node-profile').slice(-1)[0]), _this.nodeEdit.blacklist);
        });
      };

      return AddNode;

    })(Backbone.View);
  });

}).call(this);
